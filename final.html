<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./jquery-3.6.0.min.js"></script>
    <style>
        body{
            margin :0px auto;
            text-align: center;
        }
        div{
            margin :0px auto;
            text-align: center;
        }
        .box {
            border: 1px solid gray;
            padding: 10px;
            border-radius: 5px;
        }
        .alert{
            width:500px;
            height: 300px;
        }
        span {
            border: 1px solid gray;
            padding: 5px;
            margin: 5px;
            border-radius: 5px;
            background-color: lightblue;
        }

    </style>
    <script>
        //=========================================================================
        function gid(id) {return document.getElementById(id);}
        //=========================================================================
        function keydownHandler(){
            if(event.keyCode == 13){ //Enter key를 눌렀으면...
                this.value = this.value.trim(); //스페이스바 처리
                    if(this.value.length > 0) { //아무것도 없을때 처리
                        //span태그 추가하기
                        let newItem = document.createElement('span');
                        $(newItem).addClass("badge bg-info");
                        newItem.innerHTML = this.value;
                        $(newItem).click(spanClickHandler);
                        //---------------------------------------------------------
                        //버튼 넣어주기
                        let btn = document.createElement("button");
                        btn.innerHTML = "X";
                        $(btn).addClass("btn btn-dark btn-sm");
                        newItem.appendChild(btn);      
                        $(btn).click(btnClickHandler);
                        //---------------------------------------------------------
                        gid("listToDo").appendChild(newItem);
                        this.value = "";
                }
            } 
        }
        //=========================================================================
        //click한 버튼을 포함하는 span 객체(버튼의 부모노드)를 삭제한다.
        function btnClickHandler(){
            $(this.parentNode).remove();
        }
        //=========================================================================
        // 클릭한 span 객체를 listDone 객체의 자식노드로 보낸다.(연결한다)
        function spanClickHandler(){
            let parentID = this.parentNode.getAttribute('id')

            if(parentID == "listToDo"){
                gid("listDone").appendChild(this);
            } else {
                gid("listToDo").appendChild(this);
            }
        }

        //=========================================================================
        $(document).ready(function(){
            $("span").click(spanClickHandler);
            $("#newItem").keydown(keydownHandler);
        });
        $(function () {
            $("#datepicker").datepicker();
        });

        //=========================================================================
    </script>
</head>
<body>
    <div id="test">
        <h1>ToDo List Project</h1>
    </div>
    <hr>
    <input type="date">

    <br>
    해야할 일 : <input type="text" id="newItem" size="30"> 
    <hr>
    <h3>ToDo List</h3>
    <div class="alert alert-success" id="listToDo"></div>
    <h3>Done List</h3>
    <div class="alert alert-danger" id="listDone"></div>
</body>
</html>